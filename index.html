<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Kubectl-cloudflow</title>

		<link rel="stylesheet" href="node_modules/reveal.js/dist/reset.css">
		<link rel="stylesheet" href="node_modules/reveal.js/dist/reveal.css">
		<link rel="stylesheet" href="node_modules/reveal.js/dist/theme/moon.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="node_modules/reveal.js/plugin/highlight/monokai.css" id="highlight-theme">

    <link rel="icon" type="image/png" href="./imgs/favicon.ico">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

        <section data-markdown>
          <textarea data-template>
            ## Scala per applicazioni da riga di comando? SÃ­ grazie!
            <!-- ## Programmi da riga di comando in Scala? Perche' no! -->

            <img class="cloudflow-icon" style="width: 120px;" src="./imgs/cloudflow-icon-full-color-flush.svg">
          </textarea>
        </section>

        <section>
          <section data-markdown>
            <textarea data-template>
              ## Chi sono

              <img style="height: 240px;" src="./imgs/again.png">
              <br>

              - [andreaTP]() su GitHub
              - [@and_prf]() su Twitter
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              <img style="height: 240px;" src="./imgs/Flag_of_Portugal.svg.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              <img style="height: 500px;" src="./imgs/Belem-Tower.jpeg">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              <img style="height: 240px;" src="./imgs/dog.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## Ieni-strello

              <img style="height: 240px;" src="./imgs/ineistrello.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## Programmazione

              <img style="height: 120px;" src="./imgs/scala-spiral.png">
              <img style="height: 120px;" src="./imgs/akka_full_color.svg">
              <img style="height: 100px;" src="./imgs/sbt-logo.svg">
              <br>
              <img style="height: 60px;" src="./imgs/graalvm-logo.svg">
              <img style="height: 120px;" src="./imgs/k8s-logo.png">
              <img style="height: 120px;" src="./imgs/crystal.png">
            </textarea>
          </section>
        </section>

        <section>
          <section data-markdown>
            <textarea data-template>
              ## Prerequisiti
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>

              <img style="height: 120px;" src="./imgs/cloudflow-reverse.svg">
              <br>

              [Cloudflow.io](http://cloudflow.io/docs/current/index.html)

            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>

              ### microservizi

              <img style="height: 300px;" src="./imgs/business-logic.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### streaming frameworks
              <img style="height: 120px; background: white" class="fragment" data-fragment-index="1" src="./imgs/akka_full_color.svg">
              <img style="height: 120px;; background: white" class="fragment" data-fragment-index="2" src="./imgs/flink.png">
              <img style="height: 120px;; background: white" class="fragment" data-fragment-index="3" src="./imgs/spark.png">

              ### connessi con<!-- .element: class="fragment" data-fragment-index="4" -->
              <img style="height: 120px;; background: white" class="fragment" data-fragment-index="4" src="./imgs/kafka.jpeg">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>

              ### integrazione con build tools

              <img style="height: 120px; background: white" class="fragment" data-fragment-index="1" src="./imgs/sbt-logo.svg">
              <br>
              <img style="height: 120px; background: white" class="fragment" data-fragment-index="2" src="./imgs/maven.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### Estensioni a
              <img style="height: 240px;" src="./imgs/k8s-logo.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### operatore

              <img style="height: 300px;" src="./imgs/kubernetes_operators.webp">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### monitoring

              <img style="height: 400px;" src="./imgs/monitoring-cloudflow.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### kubectl-plugin:

              ```bash
              kubectl cloudflow deploy hello-world.json --conf prod.conf
              ```

              [Writing-kubectl-plugins](https://kubernetes.io/docs/tasks/extend-kubectl/kubectl-plugins/#writing-kubectl-plugins)
            </textarea>
          </section>
        </section>

        <section>
          <section data-markdown>
            <textarea data-template>
              ## Kubectl cloudflow
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## Prima

              <img style="height: 400px;" class="fragment" data-fragment-index="1" src="./imgs/pirate-golang.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              <img style="height: 400px;" src="./imgs/old-cli.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## Perche' riscrivere?

              - pagare debito tecnico <!-- .element: class="fragment" data-fragment-index="1" -->
              - eliminare bachi (e.g. HOCON parsing) <!-- .element: class="fragment" data-fragment-index="2" -->
              - migliorare l'ergonomia <!-- .element: class="fragment" data-fragment-index="3" -->
              - ri-usare codice al massimo <!-- .element: class="fragment" data-fragment-index="4" -->
              - ridurre la manutenzione (librerie ad alto livello) <!-- .element: class="fragment" data-fragment-index="5" -->
              - abbassare la barriera di ingresso <!-- .element: class="fragment" data-fragment-index="6" -->
            </textarea>
          </section>
        </section>

        <section>
          <section data-markdown>
            <textarea data-template>
              ## Dopo
  
              <img style="height: 400px;" class="fragment" data-fragment-index="1" src="./imgs/scala-spiral.png">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 1- Binari nativi - GraalVM
  
              - Compilatore JIT<!-- .element: class="fragment" data-fragment-index="1" -->
              - Truffle per implementare linguaggi dinamici<!-- .element: class="fragment" data-fragment-index="2" -->
              -<!-- .element: class="fragment" data-fragment-index="3" style="color: white;" --> SubstrateVM con AOT<!-- .element: class="fragment" data-fragment-index="3" style="color: white;font-weight: bold; font-style: italic;" -->
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 2- Fabric8 kubernetes-client

              - usato in produzione (Red Hat)<!-- .element: class="fragment" data-fragment-index="1" -->
              - API con tipi per CR<!-- .element: class="fragment" data-fragment-index="2" -->
              - Jackson :-(<!-- .element: class="fragment" data-fragment-index="3" -->
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 3- Riga di comando - Scopt

              ```scala
              cmd("deploy")
                .action((_, o) => o.copy(command = Some(commands.Deploy())))
                .text("deploy a cloudflow applications from a cr file")
                .children(
                  commandParse[commands.Deploy, File](arg("<crFile>"))((c, v) => c.copy(crFile = v))
                    .required()
                    .text("the CR file of the cloudflow application"),
                  commandParse[commands.Deploy, String](opt('u', "username"))((c, v) => c.copy(dockerUsername = v))
                    .optional()
                    .text("the docker registry username"),
                ...
              ```
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 4- Typesafe Config

              ```json
              cloudflow.streamlets.my-streamlet {
                config-parameters {
                  // config parameter values go here
                }
                config {
                  // runtime settings go here
                }
                kubernetes.pods.pod.containers.container {
                  // kubernetes container settings go here
                }
              }
              ```
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 5- Pureconfig

              - case classes<!-- .element: class="fragment" data-fragment-index="1" -->
              - validation<!-- .element: class="fragment" data-fragment-index="2" -->
              - error messages<!-- .element: class="fragment" data-fragment-index="3" -->

              <img style="height: 300px;" class="fragment" data-fragment-index="3" src="./imgs/validation.gif">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 6- Airframe Log

              <img style="height: 450px;" class="fragment" data-fragment-index="1" src="./imgs/debugging.gif">
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ## 6- Airframe Log

              <img style="height: 450px;" class="fragment" data-fragment-index="1" src="./imgs/airframe2.png">
            </textarea>
          </section>
        </section>

        <section>
          <section data-markdown>
            <textarea data-template>
              ## Problemi

            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### 1- cross compilazione

              - GH Actions (Linux, Darwin, Win)<!-- .element: class="fragment" data-fragment-index="1" -->
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### 2- binari veramente statici

              - musl <!-- .element: class="fragment" data-fragment-index="1" -->
            </textarea>
          </section>
          <section data-markdown>
            <textarea data-template>
              ### 3- configurazione

              - main alternativo con configurazione assistita<!-- .element: class="fragment" data-fragment-index="1" -->
            </textarea>
          </section>
        </section>

			</div>
		</div>

		<script src="node_modules/reveal.js/dist/reveal.js"></script>
		<!-- <script src="node_modules/reveal.js/plugin/notes/notes.js"></script> -->
		<script src="node_modules/reveal.js/plugin/markdown/markdown.js"></script>
		<script src="node_modules/reveal.js/plugin/highlight/highlight.js"></script>
		<script>
      let deck = new Reveal({
        plugins: [ RevealMarkdown, RevealHighlight ]
      })
      deck.initialize();
		</script>
	</body>
</html>